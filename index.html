<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO Meta Tags -->
  <title>Card Fusion Calculator</title>
  <meta name="description" content="Calculate optimal card fusion strategies for GrandChase Classic. Track your card collection, analyze probabilities, and plan your upgrades with official rate tables.">
  <meta name="keywords" content="GrandChase Classic, card fusion, card fuse, card system, calculator, card collection, fusion probability, GCC cards, Grand Chase">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Card Fusion Calculator - GrandChase Classic">
  <meta property="og:description" content="Calculate optimal card fusion strategies for GrandChase Classic">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en">

  <!-- Canonical and Alternate Links -->
  <link rel="canonical" href="https://eitur.github.io/gcc-card/en">
  <link rel="alternate" hreflang="en" href="https://eitur.github.io/gcc-card/">
  <link rel="alternate" hreflang="ko" href="https://eitur.github.io/gcc-card/kr/">
  <link rel="alternate" hreflang="pt-BR" href="https://eitur.github.io/gcc-card/br/">
  <link rel="alternate" hreflang="zh-TW" href="https://eitur.github.io/gcc-card/tw/">

  <!-- Favicon for browsers -->
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
  
  <!-- Apple Touch Icon (for iOS) -->
  <link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/favicon-apple-touch-icon.png">
  
  <!-- Android Chrome -->
  <link rel="icon" type="image/png" sizes="192x192" href="./images/favicon/favicon-android-chrome-192x192.png">
  <link rel="stylesheet" href="./style.css" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RWX0S3YEYS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-RWX0S3YEYS', {
      'anonymize_ip': true,
      'allow_google_signals': false,
      'allow_ad_personalization_signals': false,
      'cookie_flags': 'SameSite=None;Secure'
    });
  </script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "GrandChase Classic Card Fusion Calculator",
    "description": "Calculate optimal card fusion strategies for GrandChase Classic",
    "applicationCategory": "GameApplication",
    "operatingSystem": "Any",
  }
  </script>
</head>
<body>
<header>
  <h1 data-i18n="ui.webTitle" onclick="window.location.reload()" style="cursor: pointer;">GrandChase Classic Card Fusion Probabilities Calculator</h1>

  <div class="top-right">
    <div class="lang-dropdown">
      <button class="lang-dropdown-btn" onclick="toggleLangDropdown()">
        <span id="currentLang">{{LANG_DISPLAY}}</span>
        <span class="dropdown-arrow">▼</span>
      </button>
      <div class="lang-dropdown-menu" id="langDropdownMenu">
        <a href="/" class="lang-option active">English (EN)</a>
        <a href="/kr/" class="lang-option ">한국어 (KR)</a>
        <a href="/br/" class="lang-option ">Português (BR)</a>
        <a href="/tw/" class="lang-option ">繁體中文 (TW)</a>
      </div>
    </div>
    <div class="help-btn" data-i18n="ui.howToUse" onclick="showHelp()">How to use</div>

    <!-- Settings Dropdown Menu -->
    <div class="settings-dropdown">
      <button class="settings-dropdown-btn" onclick="toggleSettingsDropdown()" title="Settings">
        <img src="./images/theme/settings-dark.png" alt="Settings" class="settings-icon">
      </button>
      <div class="settings-dropdown-menu" id="settingsDropdownMenu">
        <a href="#" class="settings-option" onclick="exportData(); return false;">
          <img src="./images/theme/export-dark.png" alt="Export" class="export-icon">
          <span data-i18n="ui.exportData">Export</span>
        </a>
        <a href="#" class="settings-option" onclick="importData(); return false;">
          <img src="./images/theme/import-dark.png" alt="Import" class="import-icon">
          <span data-i18n="ui.importData">Import</span>
        </a>
        <a href="#" class="settings-option" onclick="showFeedback(); return false;">
          <img src="./images/theme/mail-dark.png" alt="Feedback" class="feedback-icon">
          <span data-i18n="ui.feedback">Feedback</span>
        </a>
        <a href="#" class="settings-option" onclick="showInfo(); return false;">
          <img src="./images/theme/info-dark.png" alt="Info" class="info-icon">
          <span data-i18n="ui.information">Information</span>
        </a>
      </div>
    </div>
    <div class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark Mode">
      <img src="./images/theme/dark-mode.png" alt="Theme" class="theme-icon" id="themeIcon">
    </div>
  </div>
</header>

<main>
  <div class="top-panel">
    <div id="summaryText" data-i18n="ui.noCards">No cards selected</div>
    <button onclick="showDetails()" class="details-btn" data-i18n="ui.details">See details</button>
  </div>

  <div class="toolbar">
    <div class="controls">
      <button onclick="undo()" id="undoBtn" class="icon-btn" title="Undo" disabled>
        <img src="./images/theme/undo-dark.png" alt="Undo" class="control-icon undo-icon">
      </button>
      <button onclick="redo()" id="redoBtn" class="icon-btn" title="Redo" disabled>
        <img src="./images/theme/redo-dark.png" alt="Undo" class="control-icon redo-icon">
      </button>
      <button onclick="resetAll()" id="resetBtn" class="reset-btn" data-i18n="ui.reset" title="Reset All">
        <span class="reset-text" data-i18n="ui.reset">Reset</span>
      </button>
    </div>

    <div class="filters">
      <div class="filter-checkbox">
        <input type="checkbox" id="filterIncomplete" onchange="renderTable()">
        <label for="filterIncomplete" data-i18n="ui.showIncompleteOnly">Show incomplete only</label>
      </div>

      <span data-i18n="ui.group">Group</span>:
      <select id="filterGroup" onchange="renderTable()">
        <option value="" data-i18n="ui.all">All</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="exclusive" data-i18n="ui.exclusive">exclusive</option>
        <option value="uncollectible" data-i18n="ui.uncollectible">uncollectible</option>
      </select>

      <span data-i18n="ui.acquiredFrom">AcquiredFrom</span>:
      <select id="filterAcquiredFrom" onchange="renderTable()">
        <option value="" data-i18n="ui.all">All</option>
        <option value="serdin" data-i18n="acquiredFrom.serdin"></option>
        <option value="kanavan" data-i18n="acquiredFrom.kanavan"></option>
        <option value="silverLand" data-i18n="acquiredFrom.silverLand"></option>
        <option value="ellia" data-i18n="acquiredFrom.ellia"></option>
        <option value="xenia" data-i18n="acquiredFrom.xenia"></option>
        <option value="alcubra" data-i18n="acquiredFrom.alcubra"></option>
        <option value="archimedia" data-i18n="acquiredFrom.archimedia"></option>
        <option value="harrier" data-i18n="acquiredFrom.harrier"></option>
        <option value="kricktria" data-i18n="acquiredFrom.kricktria"></option>
        <option value="solene" data-i18n="acquiredFrom.solene"></option>
        <option value="eventDungeon" data-i18n="acquiredFrom.eventDungeon"></option>
        <option value="specialDungeon" data-i18n="acquiredFrom.specialDungeon"></option>
        <option value="characterExclusiveDungeon" data-i18n="acquiredFrom.characterExclusiveDungeon"></option>
        <option value="fuse" data-i18n="acquiredFrom.fuse"></option>
        <option value="herosBullionShop" data-i18n="acquiredFrom.herosBullionShop"></option>
        <option value="chaserPass" data-i18n="acquiredFrom.chaserPass"></option>
        <option value="item" data-i18n="acquiredFrom.item"></option>
      </select>
    </div>

    <div class="search-box">
      <img src="./images/theme/magnifier-light.png" class="search-icon">
      <input id="searchBox" type="text" oninput="renderTable()" 
            data-i18n="ui.search" placeholder="Search cards..." />
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th class="sortable" onclick="sortTable('id')">
          <span data-i18n="ui.number">No.</span>
          <span class="sort-indicator" id="sort-id"></span>
        </th>
        <th></th>
        <th data-i18n="ui.cardName">Card</th>
        <!-- <th class="sortable" onclick="sortTable('point')">
          <span data-i18n="ui.point">Point</span>
          <span class="sort-indicator" id="sort-point"></span>
        </th> -->
        <th class="sortable" onclick="sortTable('group')">
          <span data-i18n="ui.group">Group</span>
          <span class="sort-indicator" id="sort-group"></span>
        </th>
        <th data-i18n="ui.acquiredFrom">AcquiredFrom</th>
        <th class="level-header">
          <div class="level-header-content">
            <span>Lv0</span>
            <input type="radio" 
                  name="select-all" 
                  class="level-radio select-all-radio" 
                  onclick="selectAllLevel(0)"
                  title="Select/Deselect all Lv0">
          </div>
        </th>
        <th class="level-header">
          <div class="level-header-content">
            <span>Lv1</span>
            <input type="radio" 
                  name="select-all" 
                  class="level-radio select-all-radio" 
                  onclick="selectAllLevel(1)"
                  title="Select/Deselect all Lv1">
          </div>
        </th>
        <th class="level-header">
          <div class="level-header-content">
            <span>Lv2</span>
            <input type="radio" 
                  name="select-all" 
                  class="level-radio select-all-radio" 
                  onclick="selectAllLevel(2)"
                  title="Select/Deselect all Lv2">
          </div>
        </th>
        <th class="level-header">
          <div class="level-header-content">
            <span>Lv3</span>
            <input type="radio" 
                  name="select-all" 
                  class="level-radio select-all-radio" 
                  onclick="selectAllLevel(3)"
                  title="Select/Deselect all Lv3">
          </div>
        </th>
        <th class="copies-header">
          <div class="copies-header-content">
            <span data-i18n="ui.copies">Copies</span>
          </div>
        </th>
      </tr>
    </thead>
    <tbody id="cardTable"></tbody>
  </table>

  <!-- Modals -->
  <div id="helpModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('helpModal')">&times;</span>
      <h2 data-i18n="help.title">How to Use</h2>
      <div id="helpContent" data-i18n-html="help.content"></div>
    </div>
  </div>

  <div id="detailsModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('detailsModal')">&times;</span>
      <h2 data-i18n="ui.detailsTitle">Selected Cards Details</h2>
      <div id="detailsContent"></div>
    </div>
  </div>

  <div id="infoModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('infoModal')">&times;</span>
      <h2 data-i18n="info.title">About & Updates</h2>
      <div id="infoContent">
        <div class="info-section">
          <h3 data-i18n="info.lastUpdate">Last Update</h3>
          <p>
            <span class="update-date" data-i18n="info.version">Version</span>
            <span class="update-date">[v1.1.0]</span>
          </p>
          <ul class="update-list">
          <li>January 15, 2026: adjust cards order</li>
          <li>January 15, 2026: add Hall of Harmony cards</li>
          <li>December 23, 2025: add checkbox to show only incomplete</li>
        </ul>
        </div>
        
        <div class="info-section">
          <h3 data-i18n="info.credits">Credits & Contributors</h3>
          <ul class="credits-list">
            <li><span data-i18n="info.cardImages">Card Images</span>: Aresius</li>
            <li><span data-i18n="info.dataContributors">Data Contributors</span>: i, Aresius, Yanyu</li>
            <li><span data-i18n="info.enBrTranslations">Translations</span>: Mika끝</li>
            <li><span data-i18n="info.twTranslations">Translations</span>: Ralas, BladeMeteor</li>
          </ul>
        </div>

      </div>
    </div>
  </div>

  <div id="feedbackModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('feedbackModal')">&times;</span>
      <h2 data-i18n="ui.feedbackTitle">Send Feedback</h2>
      <form id="feedbackForm" onsubmit="sendFeedback(event)">
        <div class="form-group">
          <label for="feedbackEmail" data-i18n="ui.feedbackEmail">Email (optional):</label>
          <input type="email" id="feedbackEmail" data-i18n="ui.feedbackEmailPlaceholder" placeholder="your@email.com">
        </div>
        <div class="form-group">
          <label for="feedbackMessage" data-i18n="ui.feedbackMessage">Message: *</label>
          <textarea id="feedbackMessage" rows="6" required data-i18n="ui.feedbackMessagePlaceholder" placeholder="Share your thoughts, report issues, or suggest improvements..."></textarea>
        </div>
        <div class="form-actions">
          <button type="button" onclick="closeModal('feedbackModal')" class="cancel-btn" data-i18n="ui.cancel">Cancel</button>
          <button type="submit" class="submit-btn" data-i18n="ui.sendFeedback">Send Feedback</button>
        </div>
        <div id="feedbackStatus" class="feedback-status"></div>
      </form>
    </div>
  </div>

  <div id="cardDetailsModal" class="modal">
    <div class="modal-content card-details-modal">
      <span class="close" onclick="closeModal('cardDetailsModal')">&times;</span>
      <div id="cardDetailsContent"></div>
    </div>
  </div>

  <button id="scrollToTop" class="scroll-to-top" onclick="scrollToTop()" title="Back to top">
    <img src="./images/theme/up-arrow-light.png" class="up-arrow-icon">
  </button>

  <div id="importModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('importModal')">&times;</span>
      <h2 data-i18n="ui.importTitle">Import Card Data</h2>
      <div class="import-content">
        <div class="import-instructions">
          <p data-i18n="ui.importInstructions">Select the JSON file you previously exported:</p>
          <ul class="import-tips">
            <li data-i18n="ui.importTip1">File must be in JSON format</li>
            <li data-i18n="ui.importTip2">This will replace your current selections</li>
            <li data-i18n="ui.importTip3">You can undo after importing</li>
          </ul>
        </div>
        <div class="file-input-area" onclick="triggerFileImport()">
          <img src="./images/theme/file-dark.png" class="file-icon">
          <div class="file-text">
            <span class="file-prompt" data-i18n="ui.clickToSelect">Click to select file</span>
            <span class="file-hint" data-i18n="ui.orDragDrop">or drag and drop JSON file here</span>
          </div>
        </div>
        <div id="selectedFileName" class="selected-file-name"></div>
      </div>
      <div id="importStatus" class="import-status"></div>
    </div>
  </div>


  <!-- Hidden file input for import -->
  <input type="file" id="importFileInput" accept=".json" style="display: none;" onchange="handleImportFile(event)">

  <script>
    window.CURRENT_LANG = 'en';
    window.BASE_PATH = '.';
  </script>
  <script src="./lazy-load.js"></script>
  <script src="./i18n.js"></script>
  <script src="./app.js"></script>
</main>
</body>
</html>